<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karma the Game of Destiny - Enhanced</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #030409;
            cursor: none;
        }

        .animation-container {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .background-image {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90vmin;
            height: 90vmin;
            background-image: url('../../public/assets/images/ai_mind_network.jpg');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            animation: scene-breathing 12s ease-in-out infinite;
            transform-origin: center center;
            z-index: 1;
        }

        /* The central pulsing X */
        .pulse-x {
            position: absolute;
            width: 10vmin;
            height: 10vmin;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            box-shadow: 0 0 20px 10px rgba(180, 80, 255, 0.5), inset 0 0 20px 5px rgba(200, 150, 255, 0.5);
            animation: pulse-animation 2.5s infinite ease-in-out;
            z-index: 10;
            cursor: pointer;
        }

        /* Floating coins */
        .coin {
            position: absolute;
            width: 5vmin;
            height: 5vmin;
            background: radial-gradient(ellipse at center, #f7d065 0%, #daa520 100%);
            border-radius: 50%;
            color: #b8860b;
            font-size: 3vmin;
            line-height: 5vmin;
            text-align: center;
            font-weight: bold;
            box-shadow: 0 0 15px 5px rgba(218, 165, 32, 0.3);
            transition: transform 0.1s ease-out;
            z-index: 5;
        }
        
        .coin-1 { top: 15%; left: 75%; }
        .coin-2 { top: 20%; left: 18%; }
        .coin-3 { top: 78%; left: 82%; }
        .coin-4 { top: 83%; left: 15%; }
        .coin-5 { top: 60%; left: 5%; }

        /* Glowing network nodes */
        .node {
            position: absolute;
            width: 1.5vmin;
            height: 1.5vmin;
            background-color: #87CEFA;
            border-radius: 50%;
            box-shadow: 0 0 10px 3px rgba(135, 206, 250, 0.7);
            animation: node-glow 3s infinite ease-in-out;
            transition: transform 0.1s ease-out;
            z-index: 5;
        }

        .node-1 { top: 30%; left: 35%; animation-delay: -0.5s; }
        .node-2 { top: 45%; left: 70%; animation-delay: -1.0s; }
        .node-3 { top: 68%; left: 62%; animation-delay: -1.5s; }
        .node-4 { top: 75%; left: 30%; animation-delay: -2.0s; }
        .node-5 { top: 50%; left: 25%; animation-delay: -2.5s; }
        .node-6 { top: 25%; left: 60%; animation-delay: -0.2s; }

        /* Connection lines */
        .connection-line {
            position: absolute;
            background-color: #888;
            height: 1px;
            transform-origin: 0 0;
            z-index: 2;
            opacity: 0.6;
        }

        /* Trailing X */
        .trail {
            position: absolute;
            height: 40px;
            width: 40px;
            border-radius: 50%;
            color: #ff3b3b;
            font-size: 40px;
            font-weight: bold;
            font-family: 'Century Gothic', sans-serif;
            text-shadow: 0 0 10px rgba(255, 59, 59, 0.8);
            pointer-events: none;
            z-index: 1000;
            animation: trail-fade-out 1s forwards;
            text-align: center;
            line-height: 40px;
        }

        /* Pulse ring effect */
        .pulse-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10vmin;
            height: 10vmin;
            border: 2px solid rgba(180, 80, 255, 0.7);
            border-radius: 50%;
            pointer-events: none;
            z-index: 8;
            opacity: 0;
        }

        /* --- KEYFRAME ANIMATIONS --- */
        @keyframes pulse-animation {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 0.7; }
            50% { transform: translate(-50%, -50%) scale(1.3); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 0.7; }
        }

        @keyframes node-glow {
            0%, 100% {
                box-shadow: 0 0 10px 3px rgba(135, 206, 250, 0.7);
                transform: scale(1);
            }
            50% {
                box-shadow: 0 0 18px 7px rgba(173, 216, 230, 0.9);
                transform: scale(1.2);
            }
        }
        
        @keyframes scene-breathing {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }

        @keyframes trail-fade-out {
            from {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            to {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.3);
            }
        }

        @keyframes pulse-ring {
            0% {
                transform: translate(-50%, -50%) scale(0.5);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(3);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="animation-container">
        <!-- The main static image -->
        <div class="background-image"></div>
        
        <!-- Connection lines will be added here by JS -->
        <div id="connection-lines"></div>
        
        <!-- The animated pulsing X -->
        <div class="pulse-x"></div>

        <!-- Animated floating coins -->
        <div class="coin coin-1">$</div>
        <div class="coin coin-2">$</div>
        <div class="coin coin-3">$</div>
        <div class="coin coin-4">$</div>
        <div class="coin coin-5">$</div>

        <!-- Animated network nodes -->
        <div class="node node-1"></div>
        <div class="node node-2"></div>
        <div class="node node-3"></div>
        <div class="node node-4"></div>
        <div class="node node-5"></div>
        <div class="node node-6"></div>
    </div>

    <script>
        // Magnetic attraction physics
        const coins = document.querySelectorAll('.coin');
        const nodes = document.querySelectorAll('.node');
        const centerX = document.querySelector('.pulse-x');
        const connectionLinesContainer = document.getElementById('connection-lines');
        const attractionRadius = 150;
        const attractionStrength = 0.2;
        
        // Store original positions
        const originalPositions = {};
        const allElements = [...coins, ...nodes];
        
        allElements.forEach((el, index) => {
            const rect = el.getBoundingClientRect();
            originalPositions[`el-${index}`] = {
                x: rect.left + rect.width/2,
                y: rect.top + rect.height/2,
                element: el
            };
        });

        // Create connection lines
        function createConnectionLines() {
            connectionLinesContainer.innerHTML = '';
            
            const centerRect = centerX.getBoundingClientRect();
            const centerXPos = centerRect.left + centerRect.width/2;
            const centerYPos = centerRect.top + centerRect.height/2;
            
            allElements.forEach(el => {
                const rect = el.getBoundingClientRect();
                const x = rect.left + rect.width/2;
                const y = rect.top + rect.height/2;
                
                const distance = Math.sqrt(Math.pow(x - centerXPos, 2) + Math.pow(y - centerYPos, 2));
                const angle = Math.atan2(y - centerYPos, x - centerXPos);
                
                const line = document.createElement('div');
                line.className = 'connection-line';
                line.style.left = centerXPos + 'px';
                line.style.top = centerYPos + 'px';
                line.style.width = distance + 'px';
                line.style.transform = `rotate(${angle}rad)`;
                
                connectionLinesContainer.appendChild(line);
            });
        }

        // Mouse interaction
        let mouseX = 0, mouseY = 0;
        
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            
            allElements.forEach((el, index) => {
                const rect = el.getBoundingClientRect();
                const elX = rect.left + rect.width/2;
                const elY = rect.top + rect.height/2;
                
                const distance = Math.sqrt(Math.pow(mouseX - elX, 2) + Math.pow(mouseY - elY, 2));
                
                if (distance < attractionRadius) {
                    const force = (attractionRadius - distance) / attractionRadius;
                    const angle = Math.atan2(mouseY - elY, mouseX - elX);
                    
                    const moveX = Math.cos(angle) * force * attractionStrength * 20;
                    const moveY = Math.sin(angle) * force * attractionStrength * 20;
                    
                    el.style.transform = `translate(${moveX}px, ${moveY}px)`;
                } else {
                    el.style.transform = 'translate(0, 0)';
                }
            });
            
            createConnectionLines();
            
            // Create trailing X
            const trail = document.createElement('div');
            trail.className = 'trail';
            trail.textContent = 'X';
            trail.style.left = (mouseX - 20) + 'px';
            trail.style.top = (mouseY - 20) + 'px';
            document.body.appendChild(trail);
            
            setTimeout(() => {
                if (trail.parentNode) {
                    trail.parentNode.removeChild(trail);
                }
            }, 1000);
        });

        // Click effect on center X
        centerX.addEventListener('click', () => {
            const ring = document.createElement('div');
            ring.className = 'pulse-ring';
            ring.style.animation = 'pulse-ring 1s ease-out forwards';
            document.querySelector('.animation-container').appendChild(ring);
            
            setTimeout(() => {
                if (ring.parentNode) {
                    ring.parentNode.removeChild(ring);
                }
            }, 1000);
        });

        // Initialize connection lines
        setTimeout(createConnectionLines, 100);
        
        // Update lines periodically
        setInterval(createConnectionLines, 100);
    </script>
</body>
</html>